<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Beslenme & Spor Dashboard</title>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#f3f4f6; }
    header { background:#2563eb; color:#fff; padding:20px; text-align:center; }
    h1 { margin:0; }
    .dashboard { display:grid; grid-template-columns:repeat(auto-fit, minmax(320px,1fr)); gap:20px; padding:20px; }
    .card { background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.1); }
    .card h2 { margin-top:0; font-size:18px; color:#2563eb; }
    input, select, button { width:100%; padding:8px; margin:6px 0; border-radius:8px; border:1px solid #ccc; }
    button { background:#2563eb; color:#fff; border:none; cursor:pointer; }
    button:hover { background:#1e40af; }
    ul { list-style:none; padding:0; }
    li { padding:6px 0; border-bottom:1px solid #eee; display:flex; justify-content:space-between; }
    .stats { display:flex; justify-content:space-around; margin:10px 0; flex-wrap:wrap; }
    .stat { background:#eef2ff; padding:10px; border-radius:8px; text-align:center; flex:1; margin:5px; min-width:90px; }
    .stat h3 { margin:0; color:#1e3a8a; }
    @media (max-width:600px) { .dashboard { grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <header>
    <h1>🍎 Beslenme & Spor Dashboard</h1>
    <p>Takibini kolayca yapabilirsin.</p>
  </header>

  <div class="dashboard">

    <!-- Günlük Özet -->
    <div class="card">
      <h2>📊 Günlük Özet</h2>
      <div class="stats">
        <div class="stat"><h3 id="today-calories">0</h3><p>Kalori</p></div>
        <div class="stat"><h3 id="meals-count">0</h3><p>Öğün</p></div>
        <div class="stat"><h3 id="current-weight">-</h3><p>Kilo (kg)</p></div>
        <div class="stat"><h3 id="exercise-min">0</h3><p>Spor (dk)</p></div>
      </div>
    </div>

    <!-- Öğün Ekle -->
    <div class="card">
      <h2>➕ Öğün Ekle</h2>
      <input type="date" id="meal-date" />
      <input type="text" id="meal-name" placeholder="Öğün (Kahvaltı)" />
      <input type="text" id="meal-food" placeholder="Yediklerin" />
      <select id="meal-category">
        <option>Protein</option><option>Karbonhidrat</option><option>Yağ</option><option>Sebze</option><option>Meyve</option>
      </select>
      <input type="number" id="meal-calories" placeholder="Kalori" />
      <button onclick="addMeal()">Ekle</button>
      <ul id="meal-list"></ul>
    </div>

    <!-- Kalori Grafiği -->
    <div class="card">
      <h2>🔥 Günlük Kalori Grafiği</h2>
      <canvas id="calorieChart" height="200"></canvas>
    </div>

    <!-- Kilo Grafiği -->
    <div class="card">
      <h2>⚖️ Kilo Takibi</h2>
      <input type="number" id="weight-input" placeholder="Bugünkü Kilo" />
      <input type="number" id="target-weight" placeholder="Hedef Kilo" value="70" />
      <button onclick="addWeight()">Kaydet</button>
      <canvas id="weightChart" height="200"></canvas>
    </div>

    <!-- Spor Takibi -->
    <div class="card">
      <h2>🏋️ Spor Takibi</h2>
      <input type="date" id="exercise-date" />
      <input type="text" id="exercise-name" placeholder="Egzersiz (Koşu)" />
      <input type="number" id="exercise-minutes" placeholder="Dakika" />
      <button onclick="addExercise()">Ekle</button>
      <ul id="exercise-list"></ul>
      <canvas id="exerciseChart" height="200"></canvas>
    </div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    let diary = [];
    let weights = [];
    let exercises = [];

    // Kalori Grafiği
    const calorieCtx = document.getElementById("calorieChart").getContext("2d");
    const calorieChart = new Chart(calorieCtx, {
      type: 'bar',
      data: { labels: [], datasets: [{ label:"Kalori", data:[], backgroundColor:"#2563eb" }] }
    });

    // Kilo Grafiği
    const weightCtx = document.getElementById("weightChart").getContext("2d");
    const weightChart = new Chart(weightCtx, {
      type: 'line',
      data: { labels: [], datasets: [
        { label:"Kilo", data:[], borderColor:"#2563eb", fill:false, tension:0.3 },
        { label:"Hedef", data:[], borderColor:"#16a34a", borderDash:[5,5], fill:false }
      ]}
    });

    // Spor Grafiği
    const exerciseCtx = document.getElementById("exerciseChart").getContext("2d");
    const exerciseChart = new Chart(exerciseCtx, {
      type: 'line',
      data: { labels: [], datasets: [
        { label:"Spor Süresi (dk)", data:[], borderColor:"#f97316", fill:false, tension:0.3 }
      ]}
    });

    // Öğün ekle
    function addMeal() {
      const date = document.getElementById("meal-date").value;
      const meal = document.getElementById("meal-name").value;
      const food = document.getElementById("meal-food").value;
      const category = document.getElementById("meal-category").value;
      const calories = document.getElementById("meal-calories").value;
      if (!date || !meal || !food || !calories) return;
      diary.push({ date, meal, food, category, calories:Number(calories) });
      renderMeals();
      updateCalorieChart();
      updateStats();
    }

    function renderMeals() {
      const list = document.getElementById("meal-list");
      list.innerHTML = "";
      diary.forEach(e=>{
        const li=document.createElement("li");
        li.textContent=`${e.date} - ${e.meal}: ${e.food}`;
        const span=document.createElement("span");
        span.textContent=`${e.calories} kcal`;
        li.appendChild(span);
        list.appendChild(li);
      });
    }

    function updateCalorieChart() {
      const grouped={};
      diary.forEach(e=>{ grouped[e.date]=(grouped[e.date]||0)+e.calories; });
      calorieChart.data.labels=Object.keys(grouped);
      calorieChart.data.datasets[0].data=Object.values(grouped);
      calorieChart.update();
    }

    function updateStats() {
      const today=new Date().toISOString().slice(0,10);
      const todayMeals=diary.filter(e=>e.date===today);
      const totalCalories=todayMeals.reduce((s,e)=>s+e.calories,0);
      document.getElementById("today-calories").textContent=totalCalories;
      document.getElementById("meals-count").textContent=todayMeals.length;

      const todayExercise=exercises.filter(e=>e.date===today);
      const totalMinutes=todayExercise.reduce((s,e)=>s+e.minutes,0);
      document.getElementById("exercise-min").textContent=totalMinutes;
    }

    // Kilo ekle
    function addWeight() {
      const w=document.getElementById("weight-input").value;
      const t=document.getElementById("target-weight").value;
      if(!w) return;
      const date=new Date().toLocaleDateString();
      weights.push({date,weight:Number(w),target:Number(t)});
      updateWeightChart();
      document.getElementById("current-weight").textContent=w;
    }

    function updateWeightChart() {
      weightChart.data.labels=weights.map(w=>w.date);
      weightChart.data.datasets[0].data=weights.map(w=>w.weight);
      weightChart.data.datasets[1].data=weights.map(w=>w.target);
      weightChart.update();
    }

    // Spor ekle
    function addExercise() {
      const date=document.getElementById("exercise-date").value;
      const name=document.getElementById("exercise-name").value;
      const minutes=document.getElementById("exercise-minutes").value;
      if(!date||!name||!minutes) return;
      exercises.push({date,name,minutes:Number(minutes)});
      renderExercises();
      updateExerciseChart();
      updateStats();
    }

    function renderExercises() {
      const list=document.getElementById("exercise-list");
      list.innerHTML="";
      exercises.forEach(e=>{
        const li=document.createElement("li");
        li.textContent=`${e.date} - ${e.name}`;
        const span=document.createElement("span");
        span.textContent=`${e.minutes} dk`;
        li.appendChild(span);
        list.appendChild(li);
      });
    }

    function updateExerciseChart() {
      const grouped={};
      exercises.forEach(e=>{ grouped[e.date]=(grouped[e.date]||0)+e.minutes; });
      exerciseChart.data.labels=Object.keys(grouped);
      exerciseChart.data.datasets[0].data=Object.values(grouped);
      exerciseChart.update();
    }
  </script>
</body>
</html>
